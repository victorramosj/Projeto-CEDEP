<div class="historico-container">
  <!-- Seção de Movimentações -->
  <div class="movimentacoes-section mb-4">
    <h5 class="mb-2 fw-semibold">
      Movimentações do Bem
    </h5>
    
    {% if movimentacoes %}
    <div class="list-group historico-list scrollable-list">
      {% for m in movimentacoes %}
      <div class="list-group-item d-flex gap-2 align-items-start py-2">
        <div class="icon-container bg-light-primary rounded-circle p-2">
          <i class="bi bi-arrow-left-right fs-6 text-primary"></i>
        </div>
        <div class="flex-grow-1">
          <div class="d-flex justify-content-between mb-1">
            <span class="fw-semibold">Transferência de Local</span>
            <small class="text-muted">{{ m.data_movimentacao|date:"d/m/Y H:i" }}</small>
          </div>
          <div class="d-flex gap-2 align-items-center">
            <span class="badge bg-light text-dark">{{ m.origem.nome }}</span>
            <i class="bi bi-arrow-right-short"></i>
            <span class="badge bg-light text-dark">{{ m.destino.nome }}</span>
          </div>
          {% if m.responsavel %}
          <div class="mt-1">
            <i class="bi bi-person-circle me-1"></i>
            <span class="text-muted">Responsável:</span>
            <span class="fw-semibold">{{ m.responsavel.get_full_name|default:m.responsavel.username }}</span>
          </div>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="empty-state bg-light p-3 rounded-3 text-center">
      <i class="bi bi-inbox fs-1 text-muted mb-2"></i>
      <p class="text-muted mb-0">Nenhuma movimentação registrada</p>
    </div>
    {% endif %}
  </div>

  <!-- Seção de Alterações -->
  <div class="alteracoes-section">
    <h5 class="mb-2 fw-semibold">
      Histórico de Alterações
    </h5>

    {% if log_alteracoes %}
    <div class="list-group historico-list scrollable-list">
      {% for log in log_alteracoes %}
      <div class="list-group-item d-flex gap-2 align-items-start py-2">
        <div class="icon-container bg-light-success rounded-circle p-2">
          <i class="bi bi-clock-history fs-6 text-success"></i>
        </div>
        <div class="flex-grow-1">
          <div class="d-flex justify-content-between mb-1">
            <div class="d-flex align-items-center gap-2">
              <span class="badge bg-success bg-opacity-10 text-success">Alteração</span>
              {% if log.usuario %}
              <span class="text-muted">
                <i class="bi bi-person-fill"></i>
                {{ log.usuario.get_full_name|default:log.usuario.username }}
              </span>
              {% endif %}
            </div>
            <small class="text-muted">{{ log.data_alteracao|date:"d/m/Y H:i" }}</small>
          </div>
          <div class="log-details bg-light p-2 rounded-2 pre-wrap">
            {{ log.descricao|linebreaksbr }}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="empty-state bg-light p-3 rounded-3 text-center">
      <i class="bi bi-file-earmark-text fs-1 text-muted mb-2"></i>
      <p class="text-muted mb-0">Nenhuma alteração registrada</p>
    </div>
    {% endif %}
  </div>
</div>

<style>
  .historico-list {
    border-radius: 0.5rem;
    border: 1px solid #e9ecef;
  }
  
  .icon-container {
    min-width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .pre-wrap {
    white-space: pre-wrap;
    font-family: monospace;
  }
  
  .empty-state {
    border: 2px dashed #dee2e6;
  }
  
  .log-details {
    font-size: 0.85em;
    background-color: #f8f9fa;
  }

  .scrollable-list {
    max-height: 300px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: #dee2e6 #f8f9fa;
  }

  .scrollable-list::-webkit-scrollbar {
    width: 8px;
  }

  .scrollable-list::-webkit-scrollbar-track {
    background: #f8f9fa;
    border-radius: 4px;
  }

  .scrollable-list::-webkit-scrollbar-thumb {
    background: #dee2e6;
    border-radius: 4px;
  }

  .scrollable-list::-webkit-scrollbar-thumb:hover {
    background: #adb5bd;
  }
</style>